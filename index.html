<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700;800&display=swap" rel="stylesheet">
<!-- Open Graph / WhatsApp -->
<meta property="og:type" content="website">
<meta property="og:title" content="Pokecomas Go - Comunidad De Pokemon go">
<meta property="og:description" content="Juega Presencial Pokemon go en comas - Unete a la comunidad">
<meta property="og:image" content="https://pokecomas.com/pokecomas.jpg">
<meta property="og:url" content="https://pokecomas.com">
<meta property="og:site_name" content="PokecomasGo">

<!-- Extra recomendado -->
<meta name="twitter:card" content="summary_large_image">
 


<link
  rel="stylesheet"
  href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
/>

<link rel="icon" type="image/png" href="favicon.png">

<title>PokecomasGo</title>

<style>

html, body {
    margin: 0;
    padding: 0;
    width: 100%;
    min-height: 100%;
    overflow-x: hidden;

    /* üî• DEGRADADO BASE DE RESPALDO */
    background: linear-gradient(
        180deg,
        #0b2d5a 0%,    /* azul profundo */
        #00509a 35%,   /* azul medio */
        #004f9a 75%,   /* morado/rosado */
        #005199 100%   /* oscuro final */
    );
}


/* ============================= */
/*            HERO               */
/* ============================= */
#hero {
    width: 100%;
    height: auto;
    overflow: hidden;
    position: relative;
}

#hero img {
    width: 100%;
    height: auto;
    object-fit: cover;
    object-position: center top;
}

/* ============================= */
/*     CONTENT BLOCK + FONDO     */
/* ============================= */
.content-block {
    width: 100%;
    background-image: url("background8.png");
    background-size: cover;
    background-position: center 100px; /* üåü BAJA EL FONDO */
    background-repeat: no-repeat;

    padding-top: 180px;
    padding-bottom: 150px;

    min-height: calc(100vh + 400px);
    margin-top: -350px;

    text-align: center;
    position: relative;
    z-index: 10;
}

/* ============================= */
/*             LOGO              */
/* ============================= */
.content-block .logo {
    width: 500px;
    filter: drop-shadow(0 0 15px black);
    margin-bottom: 50px;
}

/* ============================= */
/*             DIV1              */
/* ============================= */
.card {
    width: 90%;
    max-width: 900px;
    margin: 0 auto;
    position: relative;
}

.card img {
    width: 100%;
    border-radius: 20px;
}

.texto-superpuesto {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: white;
    font-size: 48px;
    font-weight: bold;
    filter: drop-shadow(0px 3px 2px rgba(0, 0, 0, 0.65));
}

/* SUB1 */
.sub1 {
    font-family: 'Lato', sans-serif;
    font-weight: 800;
    font-size: 36px;
    line-height: 44px;
    text-transform: uppercase;
    color: white;
    filter: drop-shadow(0px 2px 1px rgba(0, 0, 0, .7));
    margin-bottom: 10px;
    white-space: nowrap;
}

/* TITULO PRINCIPAL */
.titulo-principal {
    font-family: 'Lato', sans-serif;
    font-style: normal;
    font-weight: 800;
    font-size: 50px;
    line-height: 77px;
    text-transform: uppercase;

    background: linear-gradient(90deg, #e0b96c, #ffdcb5 35%, #e0b96c 70%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;

    filter: drop-shadow(0px 2px 1px rgba(0, 0, 0, .7));
    margin: 0;
    white-space: nowrap;
}

/* SUB2 */
.sub2 {
    font-family: 'Lato', sans-serif;
    font-weight: 700;
    font-size: 24px;
    line-height: 30px;
    text-transform: none;

    color: white;
    filter: drop-shadow(0px 2px 1px rgba(0, 0, 0, .7));
    margin-top: 12px;
    white-space: nowrap;
}


/* ============================ */
/*      LEYENDAS STYLE          */
/* ============================ */
.legend-container {
    margin-top: 50px;
    margin-bottom: 20px;
}

.legend {
    padding: 6px 14px;
    border-radius: 12px;
    color: white;
    font-weight: 700;
    margin: 0 8px;
    display: inline-block;
    font-family: 'Lato', sans-serif;
    filter: drop-shadow(0 2px 2px rgba(0, 0, 0, .4));
}

.legend.admin { background: #c0392b; }
.legend.asiste { background: #27ae60; }
.legend.casual { background: #2980b9; }

/* ============================ */
/*         TABLA STYLE          */
/* ============================ */
.table-container {
    width: 90%;
    max-width: 900px;
    margin: 40px auto;
    background: rgba(255, 255, 255, 0.08);
    padding: 20px;
    border-radius: 16px;
    backdrop-filter: blur(5px);
    border: 1px solid rgba(255,255,255,0.15);
}

.table-container {
    min-height: 560px; /* üîë clave */
}

.table-container {
    transition: min-height 0.25s ease;
}

#tablaRegistros {
    width: 100%;
    border-collapse: collapse;
    color: white;
    font-family: 'Lato', sans-serif;
}

/* Encabezados */
#tablaRegistros th {
    background: rgba(255, 255, 255, 0.15);
    padding: 12px;
    text-transform: uppercase;
    font-weight: 800;
    font-size: 16px;
}

/* Celdas */
#tablaRegistros td {
    padding: 10px;
    border-bottom: 1px solid rgba(255,255,255,0.1);
    transition: background 0.25s ease-in-out; /* ‚≠ê Fade suave */
}

/* ============================ */
/*     COLORES DE FILA          */
/* ============================ */

/* Fondo rojo permanente (Admins) */
tr.administrador td {
    background: rgba(255, 0, 0, 0.75) !important;
}

/* Fondo verde permanente (Asistencias ‚â• 3) */
tr.asistencias-altas td {
    background: rgba(0, 255, 85, 0.75) !important;
}

/* ============================ */
/*   HOVERS ESPECIALES           */
/* ============================ */

/* üî¥ Hover Administrador */
tr.administrador:hover td {
    background: rgba(255, 120, 120, 0.9) !important;
}

/* üü¢ Hover asistencia alta */
tr.asistencias-altas:hover td {
    background: rgba(120, 255, 180, 0.9) !important;
}

/* ‚ö™ Hover para filas normales */
#tablaRegistros tr:not(.administrador):not(.asistencias-altas):hover td {
    background: rgba(255,255,255,0.15) !important;
}

/* ============================ */
/*         TOAST                */
/* ============================ */
.toast {
    position: fixed;
    bottom: 30px;
    left: 50%;
    transform: translateX(-50%) translateY(20px);
    background: rgba(0,0,0,0.75);
    padding: 12px 22px;
    color: white;
    border-radius: 12px;
    font-size: 16px;
    opacity: 0;
    backdrop-filter: blur(3px);
    transition: all 0.35s ease-in-out;
    z-index: 9999;
}

.toast.show {
    opacity: 1;
    transform: translateX(-50%) translateY(0px);
}


/* Ocultar columna Campfire */
#tablaRegistros th:nth-child(4),
#tablaRegistros td:nth-child(4) {
    display: none;
}

/* ============================= */
/*       BOT√ìN COPIAR STYLE      */
/* ============================= */

.copy-btn {
    padding: 6px 14px;
    margin-left: 8px;
    background: rgba(255,255,255,0.18);
    border: 1px solid rgba(255,255,255,0.25);
    color: white;
    border-radius: 8px;
    font-size: 13px;
    cursor: pointer;
    
    backdrop-filter: blur(4px);
    transition: all 0.2s ease-in-out;
}

.copy-btn:hover {
    background: rgba(255,255,255,0.35);
    transform: scale(1.05);
}

.copy-btn:active {
    transform: scale(0.95);
}

/* ============================= */
/*        PAGINACI√ìN STYLE       */
/* ============================= */

#paginador {
    margin-top: 25px;
    display: flex;
    justify-content: center;
    gap: 10px;
    flex-wrap: wrap;
}
/* ============================= */
/*        PAGINACI√ìN STYLE       */
/* ============================= */

#paginador {
    margin-top: 25px;
    display: flex;
    justify-content: center;
    gap: 10px;
    flex-wrap: wrap;
}

.pagina-btn {
    padding: 9px 16px;

    /* Cristal azulado base */
    background: rgba(40, 90, 160, 0.25);
    border: 1px solid rgba(255, 230, 170, 0.25);

    color: #ffe6b3;
    font-family: 'Lato', sans-serif;
    font-size: 15px;
    font-weight: 800;

    border-radius: 14px;
    cursor: pointer;

    backdrop-filter: blur(8px);
    box-shadow:
        inset 0 0 10px rgba(255,255,255,0.08),
        0 0 10px rgba(0,0,0,0.25);

    transition: all 0.25s ease;
}

/* ‚ú® Hover ‚Äì brillo dorado elegante */
.pagina-btn:hover {
    background: rgba(255, 215, 130, 0.55);
    color: #3a2300;
    transform: translateY(-2px) scale(1.08);

    box-shadow:
        0 0 14px rgba(255, 215, 130, 0.8),
        0 0 28px rgba(120, 170, 255, 0.45);
}

/* üèÜ Activo ‚Äì Dorado Pok√©mon */
.pagina-btn.active {
    background: linear-gradient(
        135deg,
        #ffe29a,
        #ffd36a 45%,
        #f2b94f
    );

    color: #3a2300;
    border-color: rgba(255, 235, 180, 0.95);

    transform: scale(1.15);

    box-shadow:
        0 0 18px rgba(255, 220, 140, 1),
        0 0 36px rgba(100, 160, 255, 0.6);
}


.paginador-oculto {
    display: none !important;
}

#tablaRegistros td {
    text-transform: capitalize;
}


/* ============================
   BOT√ìN ABRIR MODAL
============================ */
.open-modal-btn {
  margin-top: 40px;
    padding: 16px 36px;
    background: linear-gradient(90deg, #ffe27a, #ffd048);
    border-radius: 20px;
    color: #5a3a00;
    font-size: 22px;
    font-weight: 900;

    border: 2px solid #fff2a0;
    cursor: pointer;
    transition: 0.3s;

    box-shadow:
        0 0 12px #ffe27a,
        0 0 22px #5c80b1;
}
.open-modal-btn:hover {
    transform: scale(1.1);
    box-shadow:
        0 0 20px #ffe27a,
        0 0 45px #0d5f99;
}




/* ============================
     MODAL OVERLAY
============================ */
.modal-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(10, 5, 30, 0.75);
    backdrop-filter: blur(8px);
    justify-content: center;
    align-items: center;
    z-index: 9999;
}


/* ============================
        MODAL BOX
============================ */
.modal-box {
    background: linear-gradient(135deg, rgba(20,55,110,0.55), rgba(140,20,80,0.55));
    padding: 40px;
    width: 90%;
    max-width: 720px;

     max-height: 85vh;    /* No crece m√°s del 85% de la pantalla */
    overflow-y: auto;    /* Scroll interno */
    border-radius: 24px;
    border: 2px solid rgba(255,220,120,0.45);

    box-shadow:
        0 0 20px rgba(255, 232, 150, 0.35),
        0 0 45px rgba(0, 80, 150, 0.35);

    backdrop-filter: blur(14px);
    position: relative;
    animation: fadeIn 0.25s ease-out;
}


@keyframes fadeIn {
    from { transform: scale(0.92); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
}

/* Cerrar modal */
.close-modal {
    position: absolute;
    top: 12px;
    right: 18px;
    font-size: 34px;
    color: #fff;
    cursor: pointer;
    transition: 0.2s;
    text-shadow: 0 0 8px rgba(255,220,120,0.6);
}
.close-modal:hover {
    color: #ffe27a;
    transform: scale(1.15);
}


/* T√≠tulo */
.modal-title {
    font-size: 34px;
    font-weight: 900;
    text-transform: uppercase;
    color: #ffe8a3;
    margin-bottom: 20px;
    text-align: center;
    letter-spacing: 1px;
    text-shadow: 0 0 6px rgba(255,218,120,0.7);
}


/* ============================
        FORMULARIO
============================ */
.modal-form-row {
    display: flex;
    gap: 18px;
    flex-wrap: wrap;
}

.form-column {
    flex: 1;
    min-width: 260px; /* as√≠ nunca se enciman */
}

.form-column input {
    width: 100%;
    box-sizing: border-box;
}

label {
    display: block;
    color: #fff7cc;
    margin-bottom: 6px;
    font-weight: 700;
}


input {
    width: 100%;
    padding: 12px;
    border-radius: 12px;

    background: rgba(12,50,100,0.35);
    border: 1px solid rgba(255,220,120,0.4);
    color: white;

    margin-bottom: 15px;
    transition: 0.25s;
}

input:focus {
    outline: none;
    background: rgba(15,70,130,0.45);
    border-color: #ffe27a;
    box-shadow:
        0 0 10px rgba(255,228,120,0.8),
        0 0 20px rgba(120,200,255,0.5);
}


/* ============================
        AGREGAR C√ìDIGO
============================ */
.add-code-btn {
    padding: 10px 16px;
    background: linear-gradient(90deg, #829ec3, #5c80b1);
    border: 1px solid rgba(255,220,120,0.5);
    color: white;
    border-radius: 12px;
    cursor: pointer;
    transition: 0.25s;
    font-weight: 700;
}

.add-code-btn:hover {
    background: linear-gradient(90deg, #a0c4cb, #829ec3);
    transform: scale(1.07);
    box-shadow: 
        0 0 10px rgba(255, 232, 140, 0.7),
        0 0 20px rgba(100,180,255,0.5);
}

/* ============================
        BOT√ìN ENVIAR
============================ */
.send-all-btn {
    width: 100%;
    padding: 14px;
    background: linear-gradient(90deg, #6d1547, #123f82);
    border: 1px solid rgba(255,255,255,0.35);
    color: white;
    border-radius: 14px;
    font-size: 18px;
    font-weight: 700;
    cursor: pointer;
    margin-top: 18px;
    transition: 0.3s;
}

.send-all-btn:hover {
    background: linear-gradient(90deg, #b5114a, #06497a);
    transform: scale(1.05);
    box-shadow: 0 0 14px rgba(246,255,0,0.7);
}

/* Scroll del MODAL: muy fino */
.modal-box::-webkit-scrollbar {
    width: 6px;
}

/* Riel del scroll (fondo) */
.modal-box::-webkit-scrollbar-track {
    background: rgba(255,255,255,0.08);
    border-radius: 10px;
}

/* Pulgar del scroll (barra que se mueve) */
.modal-box::-webkit-scrollbar-thumb {
    background: #6d1547;
}
.modal-box::-webkit-scrollbar-thumb:hover {
    background: #8a1f64;
}

/* üî¥ Campo duplicado */
.input-error {
    border: 2px solid #ff5555 !important;
    background: rgba(255,50,50,0.25) !important;
}

/* üü¢ Campo correcto */
.input-ok {
    border: 2px solid #7dff7d !important;
    background: rgba(50,255,50,0.20) !important;
}

.extra-block {
    margin-top: 10px;
}

.extra-row {
    position: relative;
    align-items: center;
}

/* Bot√≥n eliminar bloque extra */
.remove-block-btn {
    position: absolute;
    top: -8px;
    right: -8px;
    width: 26px;
    height: 26px;
    border-radius: 50%;
    border: 1px solid rgba(255,255,255,0.7);
    background: radial-gradient(circle, #ff6b6b, #b5114a);
    color: #fff;
    font-weight: 900;
    font-size: 15px;
    cursor: pointer;
    box-shadow: 0 0 8px rgba(0,0,0,0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0;
    transition: transform 0.15s, box-shadow 0.15s, background 0.15s;
}

.remove-block-btn:hover {
    transform: scale(1.08);
    background: radial-gradient(circle, #ff8585, #d31750);
    box-shadow: 0 0 10px rgba(255,120,120,0.9);
}

/* ============================
    AVISO INFORMATIVO
============================ */
.modal-info-box {
    margin-top: 25px;
    padding: 16px 20px;
    background: rgba(255, 245, 200, 0.15);
    border-left: 4px solid #ffe27a;
    border-radius: 12px;
    font-size: 15px;
    font-weight: 600;
    color: #ffffff;

    backdrop-filter: blur(6px);
    text-shadow: 0 0 6px rgba(255,220,120,0.45);
    box-shadow:
        0 0 10px rgba(255, 230, 150, 0.25),
        inset 0 0 12px rgba(255, 230, 150, 0.15);
}


::placeholder {
    color: #ffeac7;
    opacity: 0.65;
    font-weight: 600;
}

/* TARJETA POK√âMON GO */
.parque-card {
    width: 100%;
    max-width: 1100px;
    margin: 60px auto;
    perspective: 1400px;
}

.parque-card-inner {
    width: 100%;
    height: 420px;
    position: relative;
    transition: transform 1s ease;
    transform-style: preserve-3d;
}

.parque-card.flip .parque-card-inner {
    transform: rotateY(180deg);
}

.parque-card-front,
.parque-card-back {
    position: absolute;
    width: 100%;
    height: 100%;
    border-radius: 28px;
    backface-visibility: hidden;
    overflow: hidden;
    box-shadow: 0 10px 30px rgba(0,0,0,0.45);
    border: 2px solid rgba(255,120,180,0.35); /* borde rosado oficial */
}

/* üìå FRENTE */
.parque-card-front {
    display: flex;
    background: #1b0044;
    position: relative;
}

.parque-img {
    width: 55%;
    height: 100%;
    object-fit: cover;
    filter: brightness(0.92);
}

/* SVG estilo Pok√©mon GO */
.svg-deco {
    position: absolute;
    top: -20%;
    left: -2%;
    height: 140%;        /* ‚ö° SVG m√°s grande */
    width: auto;

    opacity: 1;
    pointer-events: none;
}


/* üìå INFO */
.parque-info {
    width: 45%;
    padding: 60px 40px 40px 40px;
    color: white;
    position: relative;
}

.parque-info h2 {
    font-size: 42px;
    margin: 0 0 10px;
    text-shadow: 0px 2px 6px rgba(0,0,0,0.45);
}

.parque-info p {
    font-size: 17px;
    margin-bottom: 24px;
    opacity: 0.9;
}

/* ICONO POKEBOLA */
.poke-icon {
    position: absolute;
    top: 20px;
    right: 22px;
    width: 42px;
    opacity: 0.8;
}

/* BOTONES */
.btn-info, .btn-maps {
    padding: 12px 28px;
    border-radius: 14px;
    border: none;
    background: linear-gradient(90deg,#ffe27a,#ffd048);
    color: #532a00;
    font-weight: 900;
    cursor: pointer;
    transition: .25s;
    margin-right: 10px;
}

.btn-info:hover,
.btn-maps:hover {
    transform: scale(1.07);
    box-shadow: 0 0 16px rgba(255,220,120,0.9);
}

/* üìå BOT√ìN COMO LLEGAR EN EL FRENTE */
.front-buttons {
    margin-top: 20px;
}

/* üìå DORSO */
.parque-card-back {
    background: radial-gradient(circle at top left,#1f4287,#120c24);
    color: white;
    transform: rotateY(180deg);
    padding: 50px;
}

.detalle-lista {
    list-style: none;
    padding: 0;
    margin-bottom: 25px;
}

.detalle-lista li {
    margin-bottom: 12px;
    font-size: 19px;
    border-bottom: 1px solid rgba(255,255,255,0.1);
    padding-bottom: 6px;
}

/* RESPONSIVE */
@media(max-width: 900px){
    .parque-card-inner {
        height: 650px;
    }
    .parque-card-front {
        flex-direction: column;
    }
    .parque-img {
        width: 100%;
        height: 220px;
    }
    .parque-info {
        width: 100%;
        padding: 30px;
        text-align: center;
    }
    .poke-icon {
       right: 50%;
       transform: translateX(50%);
    }
}

/* =============================
   SECCI√ìN ALEGRE POK√âCOMAS
============================= */
.join-section {
    text-align: center;
    margin-top: 120px;
    margin-bottom: 80px;
    position: relative;
}

.join-banderines {
    width: 60%;
    max-width: 600px;
    opacity: 0.9;
    margin-bottom: -20px;
    pointer-events: none;
}

/* T√≠tulo alegre */
.join-title {
    font-size: 48px;
    font-weight: 900;
    text-transform: uppercase;
    color: #ffeaa7;
    text-shadow:
        0 0 10px rgba(255,240,150,0.9),
        0 0 25px rgba(255,200,100,0.4);

    animation: glow 3s ease-in-out infinite;
}

@keyframes glow {
    0% { text-shadow: 0 0 12px rgba(255,230,130,.8); }
    50% { text-shadow: 0 0 22px rgba(255,190,80,.9); }
    100% { text-shadow: 0 0 12px rgba(255,230,130,.8); }
}

.join-sub {
    font-size: 20px;
    color: white;
    opacity: 0.9;
    max-width: 680px;
    margin: 15px auto 35px auto;
    line-height: 1.5;
}


/* =============================
   BOTONES MEJORADOS
============================= */

.store-btn {
    background: #243b55;
    padding: 14px 26px;
    border-radius: 40px;
    display: flex;
    align-items: center;
    gap: 12px;

    text-decoration: none;
    color: white;
    font-weight: 700;

    box-shadow:
        0 4px 14px rgba(0,0,0,.25),
        inset 0 0 8px rgba(255,255,255,0.1);

    transition: 0.25s ease;
    min-width: 260px;
}

/* Variaci√≥n alegre */
.store-btn.joy {
    background: linear-gradient(90deg, #214a8d, #5c1d71);
    border: 2px solid rgba(255,220,120,0.35);
    box-shadow:
        0 0 12px rgba(255,200,120,0.4),
        0 0 22px rgba(100,140,255,0.35);
}

.store-btn:hover {
    transform: scale(1.06);
    box-shadow:
        0 0 20px rgba(255,200,120,0.7),
        0 0 35px rgba(120,170,255,0.5);
}

/* √çconos */
.store-icon {
    width: 32px;
}

/* Texto doble */
.btn-text {
    text-align: left;
    display: flex;
    flex-direction: column;
}

.btn-title {
    font-size: 16px;
    font-weight: 900;
}

.btn-sub {
    font-size: 13px;
    opacity: .85;
}

/* Responsive */
@media(max-width: 650px) {
    .join-title { font-size: 32px; }
    .join-sub { font-size: 17px; }

    .store-btn {
        width: 90%;
        justify-content: center;
    }

    .btn-text { text-align: center; }
}

/* =============================
   CONTENEDOR REDES HORIZONTAL
============================= */
.social-circle-container {
    display: flex;
    justify-content: center;
    align-items: flex-start;
    gap: 50px;
    flex-wrap: nowrap;
}

/* =============================
   C√çRCULO MINIMAL 3 CAPAS
============================= */
.social-circle {
    width: 130px;
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    gap: 14px;

    text-decoration: none;
    font-family: 'Lato', sans-serif;
    transition: transform 0.25s ease;
}



/* C√≠rculo central */
.circle-icon {
    position: relative;
    width: 70px;
    height: 70px;
    border-radius: 50%;
    background: #ffffff;

    display: flex;
    align-items: center;
    justify-content: center;

    margin: 18px;
}

/* Anillo medio */
.circle-icon::before {
    content: "";
    position: absolute;
    inset: -10px;
    border-radius: 50%;
    background: rgba(255,255,255,0.35);
}

/* Anillo externo */
.circle-icon::after {
    content: "";
    position: absolute;
    inset: -20px;
    border-radius: 50%;
    background: rgba(255,255,255,0.18);
}

/* Icono */
.circle-icon img {
    width: 36px;
    height: 36px;
    z-index: 2;
}

/* =============================
   TEXTO REDES (BLANCO + GRUESO)
============================= */
.social-circle span {
    font-family: 'Lato', sans-serif;
    font-weight: 900;              /* üîë M√ÅS GRUESO REAL */
    font-size: 15px;
    letter-spacing: 1.3px;
    text-transform: uppercase;
    line-height: 1.2;

    color: #ffffff;                /* üîë BLANCO PURO */

    text-shadow:
        0 1px 0 rgba(0,0,0,0.35),
        0 2px 4px rgba(0,0,0,0.35);
}

/* Hover anillos */
.social-circle:hover .circle-icon::before {
    background: rgba(255,255,255,0.45);
}
.social-circle:hover .circle-icon::after {
    background: rgba(255,255,255,0.25);
}

/* =============================
   RESPONSIVE M√ìVIL
============================= */
@media (max-width: 768px) {
    .social-circle-container {
        justify-content: flex-start;
        overflow-x: auto;
        padding: 0 20px;
        gap: 40px;
    }

    .social-circle {
        width: 110px;
    }

    .social-circle span {
        font-size: 14px;
    }
}

/* =============================
   SECCI√ìN HEADER REDES
============================= */
.social-circle-section {
    margin-top: 120px;
    margin-bottom: 100px;
    text-align: center;
}

.social-kicker {
    font-family: 'Lato', sans-serif;
    font-weight: 800;
    font-size: 20px;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: white;
    margin-bottom: 10px;
    filter: drop-shadow(0px 2px 1px rgba(0,0,0,.7));
}

.social-title-gradient {
    font-family: 'Lato', sans-serif;
    font-weight: 900;
    font-size: 46px;
    line-height: 1.2;
    text-transform: uppercase;
    margin: 0;

    background: linear-gradient(
        90deg,
        #e0b96c,
        #ffdcb5 35%,
        #e0b96c 70%
    );
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;

    filter: drop-shadow(0px 2px 1px rgba(0,0,0,.7));
}

.social-subtitle-gradient {
    font-family: 'Lato', sans-serif;
    font-weight: 700;
    font-size: 22px;
    max-width: 760px;
    margin: 14px auto 45px auto;
    color: white;
    opacity: 0.95;
    filter: drop-shadow(0px 2px 1px rgba(0,0,0,.65));
}

@media (max-width: 768px) {
    .social-title-gradient {
        font-size: 32px;
    }

    .social-subtitle-gradient {
        font-size: 18px;
        padding: 0 16px;
    }

    .social-kicker {
        font-size: 16px;
    }
}


/* =============================
   CAMPFIRE (NIANTIC)
============================= */
.social-circle.campfire .circle-icon {
    background: #ff6a00; /* naranja Campfire */
}

.social-circle.campfire .circle-icon::before {
    background: rgba(255, 140, 60, 0.45);
}

.social-circle.campfire .circle-icon::after {
    background: rgba(255, 140, 60, 0.25);
}

/* =================================================
   üì± RESPONSIVE GLOBAL ‚Äì POKECOMAS GO
================================================= */

/* -------------------------------
   üì± CELULARES PEQUE√ëOS (‚â§ 360px)
-------------------------------- */
@media (max-width: 360px) {

    .content-block {
        padding-top: 120px;
        padding-bottom: 100px;
        margin-top: -280px;
    }

    .content-block .logo {
        width: 260px;
        margin-bottom: 30px;
    }

    .texto-superpuesto {
        position: static;
        transform: none;
        padding: 20px 10px;
    }

    .sub1 {
        font-size: 20px;
        line-height: 26px;
        white-space: normal;
    }

    .titulo-principal {
        font-size: 26px;
        line-height: 32px;
        white-space: normal;
    }

    .sub2 {
        font-size: 15px;
        line-height: 20px;
        white-space: normal;
    }

    .open-modal-btn {
        font-size: 16px;
        padding: 12px 24px;
    }

    /* Tabla scrollable */
    .table-container {
        overflow-x: auto;
    }

    #tablaRegistros {
        min-width: 600px;
    }

    /* Modal */
    .modal-box {
        padding: 20px;
        max-height: 90vh;
    }

    .modal-title {
        font-size: 22px;
    }

    label {
        font-size: 14px;
    }

    input {
        font-size: 14px;
        padding: 10px;
    }

    .send-all-btn {
        font-size: 16px;
    }
}

/* --------------------------------
   üì± CELULARES MEDIANOS (361‚Äì480px)
--------------------------------- */
@media (max-width: 480px) {

    .content-block .logo {
        width: 300px;
    }

    .sub1 {
        font-size: 22px;
        white-space: normal;
    }

    .titulo-principal {
        font-size: 30px;
        line-height: 36px;
        white-space: normal;
    }

    .sub2 {
        font-size: 16px;
        white-space: normal;
    }

    .texto-superpuesto {
        position: static;
        transform: none;
        padding: 20px;
    }

    .open-modal-btn {
        font-size: 18px;
    }

    .modal-box {
        padding: 26px;
    }

    .modal-title {
        font-size: 26px;
    }

    /* Redes */
    .social-circle-container {
        gap: 26px;
    }

    .social-circle {
        width: 100px;
    }
}

/* --------------------------------
   üì± CELULARES GRANDES (481‚Äì600px)
--------------------------------- */
@media (max-width: 600px) {

    .content-block .logo {
        width: 340px;
    }

    .titulo-principal {
        font-size: 34px;
        line-height: 42px;
        white-space: normal;
    }

    .sub1 {
        font-size: 24px;
    }

    .sub2 {
        font-size: 18px;
    }

    .open-modal-btn {
        font-size: 20px;
    }

    .modal-box {
        max-width: 95%;
    }

    .table-container {
        overflow-x: auto;
    }
}

/* --------------------------------
   üì≤ TABLETS (601‚Äì900px)
--------------------------------- */
@media (max-width: 900px) {

    .content-block {
        padding-top: 150px;
    }

    .content-block .logo {
        width: 400px;
    }

    .titulo-principal {
        font-size: 40px;
        line-height: 50px;
        white-space: normal;
    }

    .sub1 {
        font-size: 28px;
    }

    .sub2 {
        font-size: 20px;
    }

    .modal-box {
        max-width: 90%;
    }

    .table-container {
        max-width: 95%;
    }
}

/* --------------------------------
   üß† AJUSTES UNIVERSALES MOBILE
--------------------------------- */
@media (max-width: 768px) {

    /* Quitar nowrap global en m√≥vil */
    .sub1,
    .sub2,
    .titulo-principal {
        white-space: normal;
    }

    /* Botones siempre centrados */
    button {
        max-width: 100%;
    }

    /* Scroll horizontal limpio */
    .table-container::-webkit-scrollbar {
        height: 6px;
    }

    .table-container::-webkit-scrollbar-thumb {
        background: rgba(255,255,255,0.3);
        border-radius: 10px;
    }
}

/* =================================================
   üßæ TABLA RESPONSIVE SIN SCROLL + TEXTO CORTADO
================================================= */

/* Tabla fija: NO scroll horizontal */
#tablaRegistros {
    width: 100%;
    table-layout: fixed; /* üîë CLAVE */
}

/* Ancho proporcional por columna */
#tablaRegistros th:nth-child(1),
#tablaRegistros td:nth-child(1) {
    width: 30%; /* Nombre real */
}

#tablaRegistros th:nth-child(2),
#tablaRegistros td:nth-child(2) {
    width: 30%; /* Nombre Pok√©mon */
}

#tablaRegistros th:nth-child(3),
#tablaRegistros td:nth-child(3) {
    width: 40%; /* C√≥digo */
}

/* Texto truncado con ... */
.td-ellipsis {
    max-width: 100%;
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
}

/* Tooltip SOLO cuando JS lo activa */
.td-ellipsis.is-truncated:hover::after {
    content: attr(data-full);
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0,0,0,0.85);
    color: #fff;
    padding: 6px 10px;
    border-radius: 8px;
    white-space: normal;
    max-width: 260px;
    z-index: 50;
    margin-top: 6px;
    font-size: 13px;
}



/* Contenedor relativo para tooltip */
#tablaRegistros td {
    position: relative;
}

/* C√≥digo no se rompe */
#tablaRegistros td:nth-child(3) span {
    word-break: keep-all;
    white-space: nowrap;
}


/* üîí Bloquear scroll del body cuando el modal est√° abierto */
body.modal-open {
  position: fixed;
  width: 100%;
  overflow: hidden;
}


/* ================================
   üì± AJUSTES M√ìVIL
================================ */
@media (max-width: 600px) {

    #tablaRegistros th {
        font-size: 13px;
        padding: 8px;
    }

    #tablaRegistros td {
        font-size: 13px;
        padding: 8px;
    }

    .copy-btn {
        font-size: 11px;
        padding: 4px 8px;
        margin-top: 4px;
        display: block;
    }
}

/* ================================
   üì± BOT√ìN COPIAR CENTRADO EN M√ìVIL
================================ */
@media (max-width: 600px) {

    /* Celda del c√≥digo */
    #tablaRegistros td:nth-child(3) {
        text-align: center;
    }

    /* C√≥digo */
    #tablaRegistros td:nth-child(3) span {
        display: block;
        margin-bottom: 6px;
        font-weight: 700;
    }

    /* Bot√≥n copiar */
    .copy-btn {
        display: inline-block;
        margin: 0 auto;
    }
}

/* =================================
   üì± HERO + LOGO FIX (NO TAPAR fondo.png)
================================= */
@media (max-width: 768px) {

    /* Quitamos el solapamiento fuerte */
    .content-block {
        margin-top: -180px;   /* antes -350px */
        padding-top: 140px;
    }

    /* Logo m√°s peque√±o y controlado */
    .content-block .logo {
        width: 240px;
        margin-bottom: 28px;
    }
}

@media (max-width: 360px) {

    .content-block {
        margin-top: -140px;
        padding-top: 120px;
    }

    .content-block .logo {
        width: 200px;
    }
}

/* =================================
   üì± SUBIR background8 EN M√ìVIL
================================= */
@media (max-width: 768px) {

    .content-block {
        background-position: center top; /* üîë SUBE EL FONDO */
        padding-top: 110px;              /* menos aire arriba */
        margin-top: -200px;              /* une hero + content */
    }
}


@media (max-width: 360px) {

    .content-block {
        background-position: center 0;
        padding-top: 95px;
        margin-top: -170px;
    }
}

/* =============================
   üó∫Ô∏è MAPA POKECOMAS
============================= */
.map-section {
    margin: 100px auto;
    text-align: center;
    position: relative;
    z-index: 20;
}

.map-frame {
    position: relative;
    width: 90%;
    max-width: 1000px;
    margin: 30px auto 0;
    padding: 12px;
    border-radius: 26px;
    background: rgba(0,0,0,0.35);
    border: 3px solid rgba(255,220,120,0.6);
    backdrop-filter: blur(6px);
    box-shadow:
        0 0 25px rgba(255,200,120,0.4),
        0 0 45px rgba(80,140,255,0.35);
}

#map {
    height: 480px;
    width: 100%;
    border-radius: 20px;
}

/* Caja QR */
.qr-box {
    position: absolute;
    right: -130px;
    top: 50%;
    transform: translateY(-50%);
    background: rgba(20,20,40,0.95);
    padding: 14px;
    border-radius: 16px;
    border: 2px solid rgba(255,220,120,0.6);
    color: white;
    width: 120px;
}

.qr-box img {
    width: 100%;
    border-radius: 8px;
    margin: 8px 0;
}

/* Responsive */
@media(max-width: 900px){
    .qr-box {
        position: static;
        transform: none;
        margin: 15px auto 0;
        width: 160px;
    }
}


/* Zoom buttons */
.leaflet-control-zoom a {
  background: #1f2937;
  color: #ffe27a;
  border-radius: 10px;
}

/* Popups */
.leaflet-popup-content {
  margin: 0;
}



.popup-title {
  font-size: 16px;
  font-weight: 700;
  margin: 0 0 6px;
  color: #1f2937;
}

.popup-desc {
  font-size: 13px;
  color: #ffffff;
  margin-bottom: 10px;
  line-height: 1.4;
}

.popup-section {
  border-top: 1px solid #e5e7eb;
  padding-top: 8px;
  margin-top: 8px;
}

.popup-label {
  font-size: 11px;
  font-weight: 600;
  color: #6b7280;
  text-transform: uppercase;
  letter-spacing: 0.04em;
}

.popup-list {
  padding-left: 16px;
  margin: 6px 0 10px;
  font-size: 13px;
  color: #374151;
}

.popup-list li {
  margin-bottom: 3px;
}

/* ICONOS */
.popup-icons {
  display: flex;
  gap: 8px;
  margin: 8px 0 12px;
}

.popup-icons img {
  width: 26px;
  height: 26px;
  object-fit: contain;
  opacity: 0.9;

}

.popup-icons img {
  width: 22px;
  height: 22px;
}


/* BOT√ìN */
.popup-btn {
  display: block;
  text-align: center;
  background: #ffffff;
  color: white;
  padding: 8px;
  border-radius: 10px;
  text-decoration: none;
  font-size: 13px;
  font-weight: 600;
}

.popup-btn:hover {
  background: #d8c51d;
}

/* =============================
   BOTONES SELECTOR MAPA
============================= */
.map-selector {
  display: flex;
  justify-content: center;
  gap: 14px;
  margin-top: 25px;
  flex-wrap: wrap;
}

.map-btn {
  padding: 12px 22px;
  border-radius: 16px;
  font-weight: 900;
  font-size: 16px;
  cursor: pointer;
  border: 2px solid rgba(255,255,255,0.4);
  color: white;
  backdrop-filter: blur(6px);
  transition: all 0.25s ease;
}

.map-btn:hover {
  transform: scale(1.08);
}

/* Colores */
.map-btn.rojo {
  background: rgba(220, 50, 50, 0.75);
  box-shadow: 0 0 12px rgba(255,80,80,.6);
}

.map-btn.verde {
  background: rgba(40, 180, 99, 0.75);
  box-shadow: 0 0 12px rgba(80,255,160,.6);
}

.map-btn.azul {
  background: rgba(52, 152, 219, 0.75);
  box-shadow: 0 0 12px rgba(80,170,255,.6);
}

/* Activo */
.map-btn.active {
  transform: scale(1.12);
  box-shadow: 0 0 20px rgba(255,220,120,1);
}

.map-btn {
  margin: 4px;
}

/* üåü PARQUE PRINCIPAL */
.map-btn.principal {
  box-shadow:
    0 0 18px rgba(255, 220, 120, 0.9),
    0 0 35px rgba(255, 200, 80, 0.8),
    0 0 55px rgba(255, 180, 60, 0.6);
  border-color: rgba(255, 230, 170, 0.9);
}

/* Brillo animado */
.map-btn.principal.active {
  animation: pulseGlow 2.5s infinite ease-in-out;
}

@keyframes pulseGlow {
  0% {
    box-shadow:
      0 0 18px rgba(255,220,120,.8),
      0 0 35px rgba(255,200,80,.6);
  }
  50% {
    box-shadow:
      0 0 28px rgba(255,230,160,1),
      0 0 55px rgba(255,200,100,.9);
  }
  100% {
    box-shadow:
      0 0 18px rgba(255,220,120,.8),
      0 0 35px rgba(255,200,80,.6);
  }
}

/* =============================
   POPUP MAPA ‚Äì ULTRA MINIMAL
============================= */

.leaflet-popup-content {
  margin: 0;
}

.popup-card {
  position: relative;      /* üîë ancla el overlay */
  width: 260px;
  min-height: 260px;       /* altura m√≠nima real */
  border-radius: 16px;
  overflow: hidden;
  color: #ffffff;

  background: #0f1e3a; /* azul oscuro limpio */
  color: #ffffff;

  font-family: 'Lato', system-ui;
  text-align: center;

  border: 1px solid rgba(255,255,255,0.12);
}

/* T√çTULO */
.popup-title {
  margin: 0 0 8px;
  font-size: 17px;
  font-weight: 900;
  letter-spacing: 0.5px;
  text-transform: uppercase;

  color: #ffc400;
}

/* DESCRIPCI√ìN */
.popup-desc {
  font-size: 13.5px;
  line-height: 1.45;
  font-weight: 600;
  opacity: 0.95;

  margin-bottom: 14px;
}

/* EVENTOS */
.popup-events {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 8px;
  margin-bottom: 14px;
}

.popup-events span {
  padding: 5px 10px;
  font-size: 11px;
  font-weight: 800;
  border-radius: 14px;
  white-space: nowrap;
}

/* Colores */
.event-raid {
  background: linear-gradient(135deg, #ef4444, #dc2626);
  color: #fff;
}

.event-community {
  background: linear-gradient(135deg, #22c55e, #16a34a);
  color: #fff;
}

.event-CommunityDayAnual {
  background: linear-gradient(135deg, #bf7bff, #7327ca);
  color: #fff;
}


.event-etc {
  background: linear-gradient(135deg, #00eeff, #007f96);
  color: #ffffff;
}


.event-hour {
  background: linear-gradient(135deg, #3b82f6, #2563eb);
  color: #fff;
}

.event-giga {
  background: linear-gradient(135deg, #a855f7, #7e22ce);
  color: #fff;
}

.event-fest {
  background: linear-gradient(135deg, #f59e0b, #d97706);
  color: #fff;
}

.event-farm {
  background: linear-gradient(135deg, #10b981, #059669);
  color: #fff;
}

.event-default {
  background: rgba(255,255,255,0.18);
  color: #fff;
}

/* ICONOS */
.popup-icons {
  display: flex;
  justify-content: center;
  gap: 12px;
  margin-bottom: 16px;
}

.popup-icons img {
  width: 20px;
  height: 20px;
  object-fit: contain;
  opacity: 0.95;
}

/* BOT√ìN */
.popup-btn {
  display: block;
  padding: 9px 14px;
  border-radius: 14px;

  background: #ffffff;
  color: #0f1e3a;

  font-size: 13px;
  font-weight: 900;
  text-decoration: none;
}

.popup-btn:hover {
  opacity: 0.9;
}



@media (max-width: 480px) {
  .poke-popup {
    grid-template-columns: 1fr;
    text-align: center;
  }

  .popup-right {
    gap: 10px;
  }
}



/* Imagen de fondo */
.popup-mormones {
  background: url("mormone.jpg") center / cover no-repeat;
}
/* Imagen de fondo */
.popup-primavera {
  background: url("primavera.jpg") center / cover no-repeat;
}
/* Imagen de fondo */
.popup-sinchi {
  background: url("sinchi.jpg") center / cover no-repeat;
}


.popup-overlay {
  position: absolute;      /* üî• clave */
  inset: 0;                /* top:0 right:0 bottom:0 left:0 */
  background: rgba(0, 0, 0, 0.55);
  padding: 16px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}



.user-pulse {
  animation: pulse 1.6s ease-out infinite;
}

@keyframes pulse {
  0% {
    r: 6;
    opacity: 1;
  }
  70% {
    r: 12;
    opacity: 0;
  }
  100% {
    r: 6;
    opacity: 0;
  }
}

.leaflet-control a.active svg {
  stroke: #2563eb;
}

.qr-box,
.map-side,
.aside-qr,
.qr-panel,
.qr-wrapper {
  display: none !important;
}

/* =================================================
   üì± FIX DEFINITIVO M√ìVIL ‚Äì HERO + BACKGROUND + LOGO
   (NO rompe escritorio)
================================================= */
@media (max-width: 768px) {

  /* HERO */
  #hero img {
    max-height: 260px;
    object-fit: cover;
    object-position: center top;
  }

  /* CONTENT BLOCK */
  .content-block {
    margin-top: -160px;              /* une hero + fondo */
    padding-top: 130px;              /* espacio real para logo */
    padding-bottom: 90px;

    background-position: center -70px; /* üîë SUBE background8 */
    background-size: cover;

    min-height: unset;               /* elimina excesos */
  }

  /* LOGO */
  .content-block .logo {
    width: 240px;                    /* tama√±o correcto */
    max-width: 70vw;
    margin: 0 auto 28px auto;
    display: block;
  }

  /* TEXTO SUPERPUESTO */
  .texto-superpuesto {
    position: static;
    transform: none;
    padding: 20px 14px;
    text-align: center;
  }

  /* TIPOGRAF√çA */
  .sub1,
  .titulo-principal,
  .sub2 {
    white-space: normal;
    text-align: center;
  }

  .sub1 {
    font-size: 22px;
    line-height: 28px;
  }

  .titulo-principal {
    font-size: 30px;
    line-height: 36px;
  }

  .sub2 {
    font-size: 16px;
    line-height: 22px;
  }
}

/* =================================================
   üì± CELULARES MUY PEQUE√ëOS (‚â§360px)
================================================= */
@media (max-width: 360px) {

  .content-block {
    margin-top: -130px;
    padding-top: 110px;
  }

  .content-block .logo {
    width: 200px;
  }

  .sub1 {
    font-size: 20px;
  }

  .titulo-principal {
    font-size: 26px;
    line-height: 32px;
  }

  .sub2 {
    font-size: 15px;
  }
}

#tablaRegistros tbody tr {
    height: 56px; /* ajusta si tu fila es m√°s alta */
}

#tablaRegistros tbody {
    display: block;
    min-height: 560px;
}

#tablaRegistros thead,
#tablaRegistros tbody tr {
    display: table;
    width: 100%;
    table-layout: fixed;
}

#tablaRegistros {
    width: 100%;
}



</style>
</head>

<body>

  <div id="countryBlock" style="display:none;">
  <div class="country-overlay">
    <div class="country-bg"></div>
  </div>
</div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>


<!-- ============================= -->
<!--            HERO               -->
<!-- ============================= -->
<div id="hero">
    <img src="fondo.jpg">
</div>


<!-- ============================= -->
<!--   CONTENT BLOCK con fondo     -->
<!-- ============================= -->
<section class="content-block">

    <!-- LOGO -->
    <img class="logo" src="logopokecomas.png">

    <!-- TARJETA DIV1 -->
    <div class="card">
        <img src="div2.png">
<div class="texto-superpuesto">

    <div class="sub1">√öNETE A LA AVENTURA</div>

    <h1 class="titulo-principal">BIENVENIDO A POKECOMAS GO</h1>

    <div class="sub2">Forma parte de nuestra comunidad de entrenadores.</div>

</div>
    </div>

    <button id="openModalBtn" class="open-modal-btn">Sumate a la comunidad</button>

    
    <!-- ============================
     MODAL REGISTRO
============================ -->
<div id="formModal" class="modal-overlay">
  <div class="modal-box">

    <span class="close-modal" id="closeModalBtn">&times;</span>

    <h2 class="modal-title">Registro de Entrenadores</h2>

 <!-- üü¶ FILA 1: Nombre Real ‚Äì Campfire -->
<div class="modal-form-row">
  <div class="form-column">
    <label>Nombre Real:</label>
    <input type="text" id="nombreRealModal" placeholder="Nombre real" required>
  </div>

  <div class="form-column">
    <label>ID Campfire (opcional):</label>
    <input type="text" id="campfireModal" placeholder="ID Campfire (opcional)">
  </div>
</div>

<!-- üü™ FILA 2: Nombre en Pok√©mon ‚Äì C√≥digo entrenador -->
<div class="modal-form-row">
  <div class="form-column">
    <label>Nombre en Pok√©mon:</label>
    <input type="text" class="nombrePokeInput" placeholder="Nombre en Pok√©mon" required>
  </div>

  <div class="form-column">
    <label>C√≥digo de entrenador:</label>
    <input type="text" class="codigoInput" maxlength="12" inputmode="numeric" placeholder="C√≥digo de entrenador (12 d√≠gitos)" required>
  </div>
</div>


    <!-- üü® CONTENEDOR DE CUENTAS EXTRA -->
    <div id="extraAccountsContainer"></div>

    <!-- BOT√ìN AGREGAR OTRA CUENTA -->
    <button id="addCodeBtn" class="add-code-btn">+ Agregar otra cuenta</button>

    <div class="modal-info-box">
    üì¢ Para participar en futuros sorteos y din√°micas de la comunidad,
    aseg√∫rate de registrar correctamente tu ID de Campfire.
</div>


    <!-- BOT√ìN ENVIAR -->
    <button id="sendAllBtn" class="send-all-btn">Registrar Cuentas</button>

  </div>
</div>



    
<!-- ============================ -->
<!--       LEYENDAS               -->
<!-- ============================ -->
<div class="legend-container">
  <span class="legend admin">Administradores</span>
  <!-- <span class="legend asiste">Asiste a las quedadas</span> -->
 <!-- <span class="legend casual">Casual</span> -->
</div>

<!-- ============================ -->
<!--            TABLA             -->
<!-- ============================ -->
<div class="table-container">
  <h2 class="titulo-principal">C√≥digos Entrenadores</h2>

  <table id="tablaRegistros">
    <thead>
      <tr>
        <th>Nombre</th>
        <th>Nombre En Pok√©mon</th>
        <th>C√≥digo Entrenador</th>
        <th>Campfire</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <div id="paginador" style="text-align:center;margin-top:15px;"></div>
</div>

<section class="map-section">

  <h2 class="titulo-principal">Zonas de Quedadas</h2>
  <p class="sub2">Lugares donde nos reunimos ....</p>

  <div class="map-selector">

  <button class="map-btn verde" data-parque="primavera">Parque Primavera</button>
  <button class="map-btn rojo principal" data-parque="mormones">Parque Mormones</button>
  <button class="map-btn azul" data-parque="sinchi">Parque Sinchi Roca</button>
</div>


  <div class="map-frame">
    <div id="map"></div>

    <div class="qr-box">
      <h4>C√≥mo llegar</h4>
      <img id="qrMap" alt="QR Google Maps">
      <small>Toca un punto</small>
    </div>
  </div>

</section>


<section class="social-circle-section">

    
     <div class="social-header">
        <div class="social-kicker">√öNETE A LA COMUNIDAD</div>

        <h2 class="social-title-gradient">
            CONECTA CON POKECOMAS GO
        </h2>

        <p class="social-subtitle-gradient">
            Ven y √∫nete a nuestra comunidad y juega Pok√©mon GO
            presencialmente en <strong>Comas</strong>.
        </p>
    </div>

    <div class="social-circle-container">

        
        <a href="https://whatsapp.com"
           target="_blank"
           class="social-circle whatsapp">
            <div class="circle-icon">
                <img src="whatsapp.svg" alt="WhatsApp">
            </div>
            <span>WhatsApp</span>
        </a>

   

        <a href="https://tiktok.com/@TU_USUARIO"
           target="_blank"
           class="social-circle tiktok">
            <div class="circle-icon">
                <img src="tiktok.svg" alt="TikTok">
            </div>
            <span>TikTok</span>
        </a>


        <a href="https://campfire.nianticlabs.com/"
   target="_blank"
   class="social-circle campfire">
    <div class="circle-icon">
        <img src="campfire.png" alt="Campfire">
    </div>
    <span>Campfire</span>
</a>

     <a href="https://instagram.com/TU_USUARIO"
           target="_blank"
           class="social-circle instagram">
            <div class="circle-icon">
                <img src="instagram.svg" alt="Instagram">
            </div>
            <span>Instagram</span>
        </a>

        <a href="https://facebook.com/TU_PAGINA"
           target="_blank"
           class="social-circle facebook">
            <div class="circle-icon">
                <img src="facebook.png" alt="Facebook">
            </div>
            <span>Facebook</span>
        </a>


    </div>
</section>

<div id="toast" class="toast"></div>



<script>

document.addEventListener("DOMContentLoaded", () => {

  // üî• NO bloquear si es localhost
  const host = location.hostname;
  const esLocal = host === "localhost" || host === "127.0.0.1";

  fetch("https://ipapi.co/json/")
    .then(res => res.json())
    .then(data => {

  if (!esLocal && data.country_code !== "PE") {
    document.getElementById("countryBlock").style.display = "block";
    return;
  }

  verificarRutaModal();

})

   .catch(() => {
  console.warn("No se pudo verificar pa√≠s");
  verificarRutaModal();
});


});

function abrirModalDesdeRuta() {
  const modal = document.getElementById("formModal");
  if (!modal) return;

  bloquearScrollBody();
  modal.style.display = "flex";
}

function verificarRutaModal() {
  const params = new URLSearchParams(window.location.search);

  if (params.get("modal") === "entrenador") {
    abrirModalDesdeRuta();
  }
}


/* ============================
   CONFIG
============================ */
const API = "https://script.google.com/macros/s/AKfycbwtYCRruaW-882HCf_Zo90gFhBXojjU6cglJsXW4C29GJ_uh7CwQt3qf7lX_aqGN0U4qw/exec";
let enviando = false; // ‚õî bloquea env√≠os m√∫ltiples


function resetBotonEnvio(btn) {
  enviando = false;
  btn.disabled = false;
  btn.textContent = "Enviar";
}


function marcarError(input, mensaje) {
    input.classList.remove("input-ok");
    input.classList.add("input-error");
    mostrarToast("‚ö† " + mensaje);
}

function marcarOk(input) {
    input.classList.remove("input-error");
    input.classList.add("input-ok");
}

let scrollPos = 0;

function bloquearScrollBody() {
  scrollPos = window.scrollY;
  document.body.classList.add("modal-open");
  document.body.style.top = `-${scrollPos}px`;
}

function restaurarScrollBody() {
  document.body.classList.remove("modal-open");
  document.body.style.top = "";
  window.scrollTo(0, scrollPos);
}

function flipCard(btn){
    const card = btn.closest(".parque-card");
    card.classList.toggle("flip");
}


// ABRIR MODAL
// ABRIR MODAL (limpia todo antes)
document.getElementById("openModalBtn").onclick = () => {
  const modal = document.getElementById("formModal");

  // limpiar valores principales
  document.getElementById("nombreRealModal").value = "";
  document.getElementById("campfireModal").value = "";

  // limpiar primera fila de nombre/c√≥digo
  const nombresPokeInputs = document.querySelectorAll(".nombrePokeInput");
  const codigoInputs      = document.querySelectorAll(".codigoInput");

  nombresPokeInputs.forEach(inp => {
    inp.value = "";
    inp.classList.remove("input-error","input-ok");
  });

  codigoInputs.forEach(inp => {
    inp.value = "";
    inp.classList.remove("input-error","input-ok");
  });

  // borrar bloques extra
  const extras = document.querySelectorAll("#extraAccountsContainer .extra-block");
  extras.forEach(e => e.remove());

  bloquearScrollBody();
modal.style.display = "flex";

};


// CERRAR MODAL
document.getElementById("closeModalBtn").onclick = () => {
  document.getElementById("formModal").style.display = "none";
  restaurarScrollBody();
};


// Cerrar al hacer clic afuera
window.onclick = e => {
  const modal = document.getElementById("formModal");
  if (e.target === modal) {
    modal.style.display = "none";
    restaurarScrollBody();
  }
};


// Agregar nuevo bloque de cuenta
document.getElementById("addCodeBtn").onclick = () => {

  const div = document.createElement("div");
  div.classList.add("extra-block");

  div.innerHTML = `
    <div class="modal-form-row extra-row">
      <div class="form-column">
        <label>Nombre en Pok√©mon:</label>
        <input type="text" class="nombrePokeInput" placeholder="Nombre en Pok√©mon">
      </div>

      <div class="form-column">
        <label>C√≥digo de entrenador:</label>
              <input type="text" class="codigoInput" maxlength="12" inputmode="numeric"
             placeholder="C√≥digo de entrenador (12 d√≠gitos)">
      </div>

      <button type="button" class="remove-block-btn" title="Eliminar cuenta">‚úï</button>
    </div>
  `;

  
  
  document.getElementById("extraAccountsContainer").appendChild(div);
  
};

document.addEventListener("keydown", (e) => {
  if (e.target.classList.contains("codigoInput")) {
    if (
      !/[0-9]/.test(e.key) &&
      !["Backspace", "Delete", "ArrowLeft", "ArrowRight", "Tab"].includes(e.key)
    ) {
      e.preventDefault();
    }
  }
});


// Eliminar bloque extra al hacer click en la X
document
  .getElementById("extraAccountsContainer")
  .addEventListener("click", (e) => {
    if (e.target.classList.contains("remove-block-btn")) {
      const block = e.target.closest(".extra-block");
      if (block) block.remove();
    }
  });



/* ============================
   ENVIAR TODO (MODAL NUEVO)
============================ */
// Evento de Enviar Todo (validaciones)

document.getElementById("sendAllBtn").onclick = async () => {

  if (enviando) return;
  enviando = true;

  const btn = document.getElementById("sendAllBtn");
  btn.disabled = true;
  btn.textContent = "‚è≥ Guardando cuentas...";

  try {

    let nombreReal = document.getElementById("nombreRealModal").value.trim();
    let campfire   = document.getElementById("campfireModal").value.trim();
    let nombresPokeInputs = document.querySelectorAll(".nombrePokeInput");
    let codigoInputs      = document.querySelectorAll(".codigoInput");
    let nombresPoke = Array.from(nombresPokeInputs, i => i.value.trim());
    let codigos     = Array.from(codigoInputs, i => i.value.trim());

    nombresPokeInputs.forEach(i => i.classList.remove("input-error", "input-ok"));
    codigoInputs.forEach(i => i.classList.remove("input-error", "input-ok"));

    // ‚úÖ VALIDACIONES
    if (!nombreReal) {
      mostrarToast("‚ö† El nombre real es obligatorio");
      return;
    }

    const nombreRealRegex = /^[a-zA-Z√°√©√≠√≥√∫√Å√â√ç√ì√ö√±√ë\s]+$/;
    if (!nombreRealRegex.test(nombreReal)) {
      mostrarToast("‚ö† El nombre real solo puede contener letras");
      return;
    }

    if (!nombresPoke.every(name => name)) {
      mostrarToast("‚ö† Todos los nombres Pok√©mon son obligatorios");
      return;
    }

    if (codigos.some(codigo => codigo.length !== 12 || !/^\d{12}$/.test(codigo))) {
      mostrarToast("‚ö† Todos los c√≥digos deben ser de 12 d√≠gitos");
      return;
    }

    for (let i = 0; i < codigos.length; i++) {
      let cod = codigos[i];
      let name = nombresPoke[i].trim().toLowerCase();
      let codInput = codigoInputs[i];
      let nameInput = nombresPokeInputs[i];

      if (codigosExistentes.has(cod)) {
        marcarError(codInput, "C√≥digo ya existe");
        return;
      }

      if (nombresPokemonExistentes.has(name)) {
        marcarError(nameInput, "Nombre Pok√©mon ya registrado");
        return;
      }

      marcarOk(codInput);
      marcarOk(nameInput);
    }

    mostrarToast("‚úî Datos validados. Enviando...");

    for (let i = 0; i < codigos.length; i++) {
      btn.textContent = `‚è≥ Guardando ${i + 1}/${codigos.length}`;

      const url = `${API}?accion=guardar` +
        `&nombre=${encodeURIComponent(nombreReal)}` +
        `&pokemon=${encodeURIComponent(nombresPoke[i])}` +
        `&codigo=${encodeURIComponent(codigos[i])}` +
        `&campfire=${encodeURIComponent(campfire)}`;

      await fetch(url);
    }

    mostrarToast("‚úî Gracias por registrarte,en breve seras aprobado");

    document.getElementById("formModal").style.display = "none";
    restaurarScrollBody();

  } catch (err) {
    console.error(err);
    mostrarToast("‚ùå Error al enviar");
  } finally {
    resetBotonEnvio(btn); // üî• SIEMPRE se ejecuta
  }
};


// Mostrar Toast
function mostrarToast(msg) {
    const t = document.getElementById("toast");
    t.textContent = msg;
    t.classList.add("show");
    setTimeout(() => t.classList.remove("show"), 1800);
}

// Marcar error
function marcarError(input, mensaje) {
    input.classList.remove("input-ok");
    input.classList.add("input-error");
    mostrarToast("‚ö† " + mensaje);
}

// Marcar OK
function marcarOk(input) {
    input.classList.remove("input-error");
    input.classList.add("input-ok");
}




/* ============================
   CACHE + VERSION (TABLA)
============================ */
const CACHE_KEY = "pokecomas_registros";
const CACHE_VERSION_KEY = "pokecomas_version";
const CACHE_MAX_AGE = 1000 * 60 * 30; // 30 min

let registrosGlobal = [];
let paginaActual = 1;
const porPagina = 10;

// Sets usados por el MODAL (IMPORTANTE)
let codigosExistentes = new Set();
let nombresPokemonExistentes = new Set();

/* ============================
   VERSIONADO
============================ */
async function verificarVersion() {
  try {
    const res = await fetch(`${API}?accion=version`);
    const data = await res.json();

    const versionServidor = String(data.version);
    const versionLocal = localStorage.getItem(CACHE_VERSION_KEY);

    if (versionLocal !== versionServidor) {
      localStorage.removeItem(CACHE_KEY);
      localStorage.setItem(CACHE_VERSION_KEY, versionServidor);
      console.log("üîÑ Cache invalidado por aprobaci√≥n");
    }
  } catch (e) {
    console.warn("No se pudo verificar versi√≥n", e);
  }
}

/* ============================
   CARGAR REGISTROS
============================ */
async function cargarRegistros() {
  const cache = localStorage.getItem(CACHE_KEY);

  if (cache) {
    registrosGlobal = JSON.parse(cache);
    prepararSets();
    mostrarPagina(paginaActual);
    console.log("üì¶ Tabla desde cache");
    return;
  }

  try {
    const res = await fetch(`${API}?accion=obtener`);
    const datos = await res.json();

    const mapa = new Map();
    datos.forEach(r => {
      if (r.codigo && !mapa.has(r.codigo)) {
        mapa.set(r.codigo, r);
      }
    });

    registrosGlobal = Array.from(mapa.values());
    prepararSets();

    localStorage.setItem(CACHE_KEY, JSON.stringify(registrosGlobal));
    mostrarPagina(1);
    console.log("üåê Tabla desde servidor");

  } catch (err) {
    console.error("Error cargarRegistros:", err);
  }
}

/* ============================
   PREPARAR SETS (MODAL)
============================ */
function prepararSets() {
  codigosExistentes.clear();
  nombresPokemonExistentes.clear();

  registrosGlobal.forEach(r => {
    if (r.codigo) codigosExistentes.add(r.codigo);
    if (r.pokemon) nombresPokemonExistentes.add(r.pokemon.toLowerCase());
  });
}

/* ============================
   INIT SEGURO
============================ */
document.addEventListener("DOMContentLoaded", async () => {
  await verificarVersion();
  await cargarRegistros();
});




function mostrarPagina(num){
  paginaActual=num;
  const inicio=(num-1)*porPagina;
  const datos=registrosGlobal.slice(inicio, inicio+porPagina);

  const tbody=document.querySelector("#tablaRegistros tbody");
  tbody.innerHTML="";
datos.forEach(r=>{
    const fila = document.createElement("tr");

    // Normaliza el texto del rango
    const rango = (r.rango || '').toLowerCase();

  if (rango.includes("administrador")) {
    fila.classList.add("administrador");

} else if ((r.asistencias || 0) >= 3 || rango.includes("asiste")) {
    fila.classList.add("asistencias-altas");

} else {
    fila.classList.add("casual");
}


    // üéØ 3. Los dem√°s quedan normales
  fila.innerHTML = `
      <td>
        <div class="td-ellipsis">
          ${r.nombre}
        </div>
      </td>

      <td>
        <div class="td-ellipsis">
          ${r.pokemon}
        </div>
      </td>

      <td>
        <span>${r.codigo}</span>
        <button class="copy-btn" onclick="copiarTexto('${r.codigo}')">
          Copiar
        </button>
      </td>

      <td>${r.campfire || ""}</td>
    `;

    tbody.appendChild(fila);
});

  activarTooltipsSiTruncado();
  generarPaginador();
}

function generarPaginador(){
    const total = Math.ceil(registrosGlobal.length / porPagina);
    const pag = document.getElementById("paginador");

    pag.innerHTML = "";

    // üëá Ocultar si solo hay una p√°gina
    if (total <= 1) {
        pag.classList.add("paginador-oculto");
        return;
    } else {
        pag.classList.remove("paginador-oculto");
    }

    // üëá Crear botones de p√°gina
    for (let i = 1; i <= total; i++) {
        pag.innerHTML += `
            <button onclick="mostrarPagina(${i})"
                    class="pagina-btn ${i === paginaActual ? 'active' : ''}">
                ${i}
            </button>`;
    }
}


function copiarTexto(texto){
  navigator.clipboard.writeText(texto);
  mostrarToast("C√≥digo copiado");
}

function mostrarToast(msg){
  const t=document.getElementById("toast");
  t.textContent=msg;
  t.classList.add("show");
  setTimeout(()=>t.classList.remove("show"),1800);
}



function activarTooltipsSiTruncado() {
    document.querySelectorAll('.td-ellipsis').forEach(el => {
        // ¬øEl texto fue cortado?
        if (el.scrollWidth > el.clientWidth) {
            el.classList.add('is-truncated');
            el.setAttribute('data-full', el.textContent.trim());
        } else {
            el.classList.remove('is-truncated');
            el.removeAttribute('data-full');
        }
    });
}

cargarRegistros();



/* =============================
   MAPA LEAFLET ‚Äì POKECOMAS
============================= */
const map = L.map('map').setView([-11.928229, -77.052999], 15); // Comas

L.tileLayer(
  'https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png',
  { maxZoom: 19 }
).addTo(map);

const iconoRojo = new L.Icon({
  iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png',
  shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',
  iconSize: [25, 41],
  iconAnchor: [12, 41],
  popupAnchor: [1, -34],
  shadowSize: [41, 41]
});

const iconoVerde = new L.Icon({
  iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-green.png',
  shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',
  iconSize: [25, 41],
  iconAnchor: [12, 41],
  popupAnchor: [1, -34],
  shadowSize: [41, 41]
});

const iconoAzul = new L.Icon({
  iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-blue.png',
  shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',
  iconSize: [25, 41],
  iconAnchor: [12, 41],
  popupAnchor: [1, -34],
  shadowSize: [41, 41]
});


// üìç PUNTOS (SIN BD)
// üìç PUNTOS (SIN BD)
const puntos = [
  {
    id: "mormones",
    nombre: "Parque Mormones",
    lat: -11.930751,
    lng: -77.055359,
    desc: "Parque principal de la comunidad donde nos juntamos a realizar diferentes actividades de la comunidad",
    eventos: ["!Hora Destacada", "!Gigamax/Dinamax", "!Community Day", "!Farmeo/Etc."],
    icono: iconoRojo,
    glow: "glow-rojo"
  },
  {
    id: "primavera",
    nombre: "Parque Primavera",
    lat: -11.924499,
    lng: -77.055694,
    desc: "Punto de encuentro para eventos donde se necesita gimnasios como eventos de Hora legendaria,Raids Day,etc",
    eventos: ["!Hora legendaria", "!Raids Day", "!Etc" ],
    icono: iconoVerde,
    glow: "glow-verde"
  },
  {
    id: "sinchi",
    nombre: "Parque Zonal Sinchi Roca",
    lat: -11.9237183,
    lng: -77.0483397,
    desc: "Lugar especial donde se organiza algunos eventos principales",
    eventos: ["!Go Fest", "!Community Day Anual", "!Etc"], 
    icono: iconoAzul,
    glow: "glow-azul"
  }
];

const marcadores = {};

function claseEvento(ev) {
  const e = ev.toLowerCase();

  if (e.includes("raid")) return "event-raid";
  if (e.includes("community")) return "event-community";
  if (e.includes("CommunityDayAnual")) return "event-communityanual";
  if (e.includes("hora")) return "event-hour";
  if (e.includes("gigamax") || e.includes("dinamax")) return "event-giga";
  if (e.includes("fest")) return "event-fest";
  if (e.includes("farmeo")) return "event-farm";
  if (e.includes("etc")) return "event-etc";
  return "event-default";
}




puntos.forEach(p => {
  const mapsUrl = `https://www.google.com/maps/dir/?api=1&destination=${p.lat},${p.lng}`;

  const popupHTML = `
    <div class="popup-card popup-${p.id} ${p.glow}">
      <div class="popup-overlay">

        <h3 class="popup-title">${p.nombre}</h3>
        <p class="popup-desc">${p.desc}</p>


        <div class="popup-events">
      ${(p.eventos || [])
    .filter(ev => !ev.startsWith("!"))
    .map(ev => `
      <span class="${claseEvento(ev)}">${ev}</span>
    `)
    .join("")}




        </div>

        
       <!-- <div class="popup-icons">
          <img src="pokestop.svg">
          <img src="gym.svg">
          <img src="nodos.svg">
          <img src="pvp.svg">
          <img src="tradear.svg">
        </div>  ---->

        <a class="popup-btn" href="${mapsUrl}" target="_blank">
          C√≥mo llegar
        </a>

      </div>
    </div>
  `;

  const marker = L.marker([p.lat, p.lng], { icon: p.icono })
    .addTo(map)
    .bindPopup(popupHTML);

  marcadores[p.id] = {
    marker,
    lat: p.lat,
    lng: p.lng
  };
});



function activarParque(id) {
  const data = marcadores[id];
  if (!data) return;

  // 1Ô∏è‚É£ Centrar suavemente SIN cambiar zoom
  map.panTo([data.lat, data.lng], {
    animate: true,
    duration: 0.5
  });

  // 2Ô∏è‚É£ Abrir popup con peque√±o delay
  setTimeout(() => {
    data.marker.openPopup();
  }, 300);

  // 3Ô∏è‚É£ QR
  document.getElementById("qrMap").src = data.qrUrl;

  // 4Ô∏è‚É£ Bot√≥n activo
  document.querySelectorAll(".map-btn").forEach(btn => {
    btn.classList.toggle("active", btn.dataset.parque === id);
  });
}

document.querySelectorAll(".map-btn").forEach(btn => {
  btn.addEventListener("click", () => {
    activarParque(btn.dataset.parque);
  });
});





// üî• SELECCI√ìN POR DEFECTO: PARQUE MORMONES
const defaultBtn = document.querySelector('.map-btn[data-parque="mormones"]');
defaultBtn.classList.add("active");

// resaltar marcador y centrar mapa


let userPoint = null;
let accuracyCircle = null;
let watchId = null;

const locationControl = L.control({ position: 'topleft' });

locationControl.onAdd = function () {
  const container = L.DomUtil.create(
    'div',
    'leaflet-bar leaflet-control'
  );

  const btn = L.DomUtil.create('a', '', container);
  btn.href = '#';
  btn.title = 'Mi ubicaci√≥n';
 btn.innerHTML = `
  <svg width="18" height="18" viewBox="0 0 24 24"
       fill="none" stroke="currentColor" stroke-width="2"
       stroke-linecap="round" stroke-linejoin="round">
    <circle cx="12" cy="12" r="3"></circle>
    <line x1="12" y1="2" x2="12" y2="6"></line>
    <line x1="12" y1="18" x2="12" y2="22"></line>
    <line x1="2" y1="12" x2="6" y2="12"></line>
    <line x1="18" y1="12" x2="22" y2="12"></line>
  </svg>
`;

btn.style.display = 'flex';
btn.style.alignItems = 'center';
btn.style.justifyContent = 'center';


  L.DomEvent.disableClickPropagation(container);

  btn.onclick = function (e) {
    e.preventDefault();
    toggleSeguimiento();
  };

  return container;
};

locationControl.addTo(map);

function toggleSeguimiento() {
  if (watchId) {
    detenerSeguimiento();
  } else {
    iniciarSeguimiento();
  }
}

function iniciarSeguimiento() {
  if (!navigator.geolocation) return;

  watchId = navigator.geolocation.watchPosition(
    pos => {
      const lat = pos.coords.latitude;
      const lng = pos.coords.longitude;
      const accuracy = pos.coords.accuracy;

      actualizarUbicacion(lat, lng, accuracy);
    },
    err => {
      console.warn('Error de ubicaci√≥n');
    },
    {
      enableHighAccuracy: true,
      maximumAge: 1000,
      timeout: 10000
    }
  );
}

function detenerSeguimiento() {
  navigator.geolocation.clearWatch(watchId);
  watchId = null;
}

function actualizarUbicacion(lat, lng, accuracy) {

  // üîµ Punto con pulso
  if (!userPoint) {
    userPoint = L.circleMarker([lat, lng], {
      radius: 6,
      className: 'user-pulse',
      color: '#2563eb',
      fillColor: '#2563eb',
      fillOpacity: 1,
      weight: 2
    }).addTo(map);
  } else {
    userPoint.setLatLng([lat, lng]);
  }

  // üîµ Anillo de precisi√≥n
  if (!accuracyCircle) {
    accuracyCircle = L.circle([lat, lng], {
      radius: accuracy,
      color: '#2563eb',
      fillColor: '#2563eb',
      fillOpacity: 0.15,
      weight: 1
    }).addTo(map);
  } else {
    accuracyCircle.setLatLng([lat, lng]);
    accuracyCircle.setRadius(accuracy);
  }

  // üéØ Recentrar SIN cambiar zoom
  map.panTo([lat, lng], {
    animate: true,
    duration: 0.5
  });

  btn.classList.toggle('active', !!watchId);

}

document.addEventListener('visibilitychange', () => {
  if (document.hidden) {
    // la pesta√±a se ocult√≥ ‚Üí detenemos GPS
    if (watchId) detenerSeguimiento();
  }
});




</script>
</body>
</html>

